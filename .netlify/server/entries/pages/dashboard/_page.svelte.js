import { c as create_ssr_component } from "../../../chunks/ssr.js";
import "../../../chunks/client.js";
const css = {
  code: ".card.svelte-1c5mdb6{border-radius:0.5rem;border-width:1px;border-color:rgb(var(--color-surface-500) / 0.3);--tw-backdrop-blur:blur(16px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)\n}",
  map: '{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { invalidateAll } from \\"$app/navigation\\";\\nimport { page } from \\"$app/stores\\";\\nimport { onMount } from \\"svelte\\";\\nimport { goto } from \\"$app/navigation\\";\\nexport let data;\\nlet { supabase, session, user } = data;\\nlet profile = null;\\nlet profilePictureUrl = null;\\nlet loading = true;\\nlet error = null;\\nlet imageFile = null;\\nlet isUploading = false;\\n$: ({ supabase, session, user } = data);\\nfunction defaultProfileIcon() {\\n  return `data:image/svg+xml,${encodeURIComponent(`\\n            <svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 24 24\\" fill=\\"currentColor\\" class=\\"w-full h-full text-surface-500\\">\\n                <path fill-rule=\\"evenodd\\" d=\\"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z\\" clip-rule=\\"evenodd\\" />\\n            </svg>\\n        `)}`;\\n}\\nfunction handleImageError(event) {\\n  const img = event.target;\\n  img.onerror = null;\\n  img.src = defaultProfileIcon();\\n  console.error(\\"Profile picture failed to load:\\", profilePictureUrl);\\n}\\nfunction handleFileSelect(event) {\\n  const input = event.target;\\n  if (input.files && input.files[0]) {\\n    imageFile = input.files[0];\\n    uploadProfilePicture();\\n  }\\n}\\nasync function uploadProfilePicture() {\\n  if (!imageFile || !session?.user) return;\\n  isUploading = true;\\n  try {\\n    const fileExt = imageFile.name.split(\\".\\").pop();\\n    const fileName = `${session.user.id}/profile.${fileExt}`;\\n    const filePath = fileName;\\n    const { error: uploadError } = await supabase.storage.from(\\"profile-pictures\\").upload(filePath, imageFile, {\\n      upsert: true,\\n      contentType: imageFile.type\\n    });\\n    if (uploadError) throw uploadError;\\n    const { publicUrl } = supabase.storage.from(\\"profile-pictures\\").getPublicUrl(filePath);\\n    const { error: profileUpdateError } = await supabase.from(\\"users\\").update({ profile_picture: publicUrl }).eq(\\"id\\", session.user.id);\\n    if (profileUpdateError) throw profileUpdateError;\\n    profilePictureUrl = publicUrl;\\n    imageFile = null;\\n  } catch (error2) {\\n    console.error(\\"Profile picture upload error:\\", error2);\\n  } finally {\\n    isUploading = false;\\n  }\\n}\\nonMount(async () => {\\n  loading = true;\\n  try {\\n    if (session?.user) {\\n      const { data: profileData, error: fetchError } = await supabase.from(\\"users\\").select(\\"first_name, last_name, email, role, discipline, qualification, profile_picture\\").eq(\\"id\\", session.user.id).single();\\n      if (fetchError) throw fetchError;\\n      profile = profileData;\\n      if (profile.profile_picture) {\\n        try {\\n          new URL(profile.profile_picture);\\n          profilePictureUrl = profile.profile_picture;\\n        } catch {\\n          console.error(\\"Invalid profile picture URL:\\", profile.profile_picture);\\n          profilePictureUrl = null;\\n        }\\n      }\\n    }\\n  } catch (err) {\\n    console.error(\\"Error fetching profile:\\", err);\\n    error = err instanceof Error ? err.message : \\"An unexpected error occurred\\";\\n  } finally {\\n    loading = false;\\n  }\\n});\\n<\/script>\\r\\n\\r\\n<div class=\\"container mx-auto p-4\\">\\r\\n    <div class=\\"grid grid-cols-1 md:grid-cols-3 gap-4\\">\\r\\n        <!-- Profile Card -->\\r\\n        <div class=\\"card p-4 space-y-4\\">\\r\\n            <div class=\\"flex flex-col items-center mb-6\\">\\r\\n                <!-- Profile Image Section -->\\r\\n                <div class=\\"relative w-32 h-32 rounded-full overflow-hidden mb-4 border-2 border-surface-300 group\\">\\r\\n                    {#if loading}\\r\\n                        <div class=\\"w-full h-full bg-surface-200 flex items-center justify-center\\">\\r\\n                            <span>Loading...</span>\\r\\n                        </div>\\r\\n                    {:else if profilePictureUrl}\\r\\n                        <img \\r\\n                            src={profilePictureUrl} \\r\\n                            alt=\\"Profile\\" \\r\\n                            class=\\"w-full h-full object-cover\\"\\r\\n                            on:error={handleImageError}\\r\\n                        />\\r\\n                    {:else}\\r\\n                        <img \\r\\n                            src={defaultProfileIcon()} \\r\\n                            alt=\\"Default Profile Icon\\" \\r\\n                            class=\\"w-full h-full object-cover text-surface-500\\"\\r\\n                        />\\r\\n                    {/if}\\r\\n                    \\r\\n                    <!-- Upload Overlay -->\\r\\n                    <div class=\\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300\\">\\r\\n                        <label \\r\\n                            class=\\"cursor-pointer text-white text-sm flex items-center justify-center w-full h-full\\"\\r\\n                            title=\\"Upload Profile Picture\\"\\r\\n                        >\\r\\n                            <input \\r\\n                                type=\\"file\\" \\r\\n                                accept=\\"image/*\\" \\r\\n                                class=\\"hidden\\" \\r\\n                                on:change={handleFileSelect}\\r\\n                            />\\r\\n                            {#if isUploading}\\r\\n                                <span>Uploading...</span>\\r\\n                            {:else}\\r\\n                                <span>Upload</span>\\r\\n                            {/if}\\r\\n                        </label>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                {#if profile}\\r\\n                    <div class=\\"text-center\\">\\r\\n                        <h3 class=\\"h3\\">{profile.first_name} {profile.last_name}</h3>\\r\\n                        <p class=\\"text-surface-600-300-token\\">{profile.email}</p>\\r\\n                    </div>\\r\\n                {/if}\\r\\n            </div>\\r\\n            \\r\\n            {#if loading}\\r\\n                <p>Loading profile...</p>\\r\\n            {:else if error}\\r\\n                <div class=\\"text-error-500\\">\\r\\n                    {error}\\r\\n                </div>\\r\\n            {:else if profile}\\r\\n                <div class=\\"space-y-2\\">\\r\\n                    <div class=\\"flex items-center space-x-2\\">\\r\\n                        <span class=\\"font-bold\\">Role:</span>\\r\\n                        <span class=\\"capitalize\\">{profile.role}</span>\\r\\n                    </div>\\r\\n                    <div class=\\"flex items-center space-x-2\\">\\r\\n                        <span class=\\"font-bold\\">Discipline:</span>\\r\\n                        <span class=\\"capitalize\\">{profile.discipline}</span>\\r\\n                    </div>\\r\\n                    <div class=\\"flex items-center space-x-2\\">\\r\\n                        <span class=\\"font-bold\\">Qualification:</span>\\r\\n                        <span class=\\"capitalize\\">{profile.qualification}</span>\\r\\n                    </div>\\r\\n                </div>\\r\\n            {/if}\\r\\n        </div>\\r\\n\\r\\n        <!-- Stats Card -->\\r\\n        <div class=\\"card p-4 space-y-4\\">\\r\\n            <h2 class=\\"h2\\">Activity</h2>\\r\\n            <div class=\\"grid grid-cols-2 gap-4\\">\\r\\n                <div class=\\"text-center p-4 rounded bg-surface-100-800-token\\">\\r\\n                    <div class=\\"text-2xl font-bold\\">0</div>\\r\\n                    <div class=\\"text-sm\\">Sessions</div>\\r\\n                </div>\\r\\n                <div class=\\"text-center p-4 rounded bg-surface-100-800-token\\">\\r\\n                    <div class=\\"text-2xl font-bold\\">0</div>\\r\\n                    <div class=\\"text-sm\\">Projects</div>\\r\\n                </div>\\r\\n                <div class=\\"text-center p-4 rounded bg-surface-100-800-token\\">\\r\\n                    <div class=\\"text-2xl font-bold\\">0</div>\\r\\n                    <div class=\\"text-sm\\">Resources</div>\\r\\n                </div>\\r\\n                <div class=\\"text-center p-4 rounded bg-surface-100-800-token\\">\\r\\n                    <div class=\\"text-2xl font-bold\\">0</div>\\r\\n                    <div class=\\"text-sm\\">Certificates</div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <!-- Quick Actions -->\\r\\n        <div class=\\"card p-4 space-y-4\\">\\r\\n            <h2 class=\\"h2\\">Quick Actions</h2>\\r\\n            <div class=\\"grid gap-2\\">\\r\\n                <button class=\\"btn variant-filled-primary\\">Schedule Session</button>\\r\\n                <button class=\\"btn variant-filled-secondary\\">Browse Resources</button>\\r\\n                <button class=\\"btn variant-filled-tertiary\\">View Projects</button>\\r\\n                <button class=\\"btn variant-filled-surface\\" on:click={() => goto(\'/profile\')}\\r\\n            >\\r\\n                Edit Profile\\r\\n            </button>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<style lang=\\"postcss\\">\\r\\n    .card {\\n    border-radius: 0.5rem;\\n    border-width: 1px;\\n    border-color: rgb(var(--color-surface-500) / 0.3);\\n    --tw-backdrop-blur: blur(16px);\\n    -webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\\n    backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)\\n}\\r\\n</style>"],"names":[],"mappings":"AAyMI,oBAAM,CACN,aAAa,CAAE,MAAM,CACrB,YAAY,CAAE,GAAG,CACjB,YAAY,CAAE,IAAI,IAAI,mBAAmB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACjD,kBAAkB,CAAE,UAAU,CAC9B,uBAAuB,CAAE,IAAI,kBAAkB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,uBAAuB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,oBAAoB,CAAC,CAAC,IAAI,qBAAqB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,mBAAmB,CAAC,CAC/Q,eAAe,CAAE,IAAI,kBAAkB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,uBAAuB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,oBAAoB,CAAC,CAAC,IAAI,qBAAqB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,mBAAmB;AAC1Q"}'
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let { data } = $$props;
  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);
  $$result.css.add(css);
  return `<div class="container mx-auto p-4"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"> <div class="card p-4 space-y-4 svelte-1c5mdb6"><div class="flex flex-col items-center mb-6"> <div class="relative w-32 h-32 rounded-full overflow-hidden mb-4 border-2 border-surface-300 group">${`<div class="w-full h-full bg-surface-200 flex items-center justify-center" data-svelte-h="svelte-g01jc4"><span>Loading...</span></div>`}  <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"><label class="cursor-pointer text-white text-sm flex items-center justify-center w-full h-full" title="Upload Profile Picture"><input type="file" accept="image/*" class="hidden"> ${`<span data-svelte-h="svelte-1brphr3">Upload</span>`}</label></div></div> ${``}</div> ${`<p data-svelte-h="svelte-y2oeu7">Loading profile...</p>`}</div>  <div class="card p-4 space-y-4 svelte-1c5mdb6" data-svelte-h="svelte-180blqc"><h2 class="h2">Activity</h2> <div class="grid grid-cols-2 gap-4"><div class="text-center p-4 rounded bg-surface-100-800-token"><div class="text-2xl font-bold">0</div> <div class="text-sm">Sessions</div></div> <div class="text-center p-4 rounded bg-surface-100-800-token"><div class="text-2xl font-bold">0</div> <div class="text-sm">Projects</div></div> <div class="text-center p-4 rounded bg-surface-100-800-token"><div class="text-2xl font-bold">0</div> <div class="text-sm">Resources</div></div> <div class="text-center p-4 rounded bg-surface-100-800-token"><div class="text-2xl font-bold">0</div> <div class="text-sm">Certificates</div></div></div></div>  <div class="card p-4 space-y-4 svelte-1c5mdb6"><h2 class="h2" data-svelte-h="svelte-14bstsn">Quick Actions</h2> <div class="grid gap-2"><button class="btn variant-filled-primary" data-svelte-h="svelte-z8vggf">Schedule Session</button> <button class="btn variant-filled-secondary" data-svelte-h="svelte-1bgcxbh">Browse Resources</button> <button class="btn variant-filled-tertiary" data-svelte-h="svelte-8n0ft7">View Projects</button> <button class="btn variant-filled-surface" data-svelte-h="svelte-5l0v4q">Edit Profile</button></div></div></div> </div>`;
});
export {
  Page as default
};
