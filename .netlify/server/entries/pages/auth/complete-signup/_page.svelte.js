import { c as create_ssr_component, a as each, e as escape } from "../../../../chunks/ssr.js";
import "../../../../chunks/client.js";
const css = {
  code: ".card.svelte-1j8d17m{border-radius:0.5rem;border-width:1px;border-color:rgb(var(--color-surface-500) / 0.3);--tw-backdrop-blur:blur(16px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)\n}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount } from \\"svelte\\";\\nimport { goto } from \\"$app/navigation\\";\\nexport let data;\\nlet step = 1;\\nlet loading = false;\\nlet error = \\"\\";\\nlet formData = {\\n  discipline: \\"\\",\\n  qualification: \\"\\",\\n  role: \\"\\"\\n};\\nconst disciplines = [\\n  { id: \\"geoscience\\", label: \\"Geoscience\\", active: true },\\n  { id: \\"petroleum\\", label: \\"Petroleum Engineering\\", active: false },\\n  { id: \\"facilities\\", label: \\"Facilities Engineering\\", active: false },\\n  { id: \\"operations\\", label: \\"Operations\\", active: false }\\n];\\nconst qualifications = [\\n  { id: \\"student\\", label: \\"Student\\" },\\n  { id: \\"bachelors\\", label: \\"Bachelor's\\" },\\n  { id: \\"masters\\", label: \\"Master's\\" },\\n  { id: \\"doctorate\\", label: \\"Doctorate\\" }\\n];\\nconst roles = [\\n  { id: \\"mentee\\", label: \\"Mentee\\" },\\n  { id: \\"mentor\\", label: \\"Mentor\\" }\\n];\\nonMount(async () => {\\n  if (!data.session) {\\n    console.error(\\"No session found\\");\\n    goto(\\"/auth\\");\\n    return;\\n  }\\n  try {\\n    const { data: profile, error: profileError } = await data.supabase.from(\\"users\\").select(\\"discipline, qualification, role\\").eq(\\"id\\", data.session.user.id).single();\\n    if (profileError) throw profileError;\\n    if (profile?.discipline && profile?.qualification && profile?.role) {\\n      goto(\\"/dashboard\\");\\n    }\\n  } catch (err) {\\n    console.error(\\"Error checking profile:\\", err);\\n    error = \\"Failed to load profile data\\";\\n  }\\n});\\nasync function handleSelection(field, value) {\\n  formData[field] = value;\\n  if (field === \\"role\\") {\\n    await completeProfile();\\n  } else {\\n    step++;\\n  }\\n}\\nasync function completeProfile() {\\n  if (!data.session?.user?.id) {\\n    error = \\"No user session found\\";\\n    return;\\n  }\\n  loading = true;\\n  error = \\"\\";\\n  try {\\n    const { error: updateError } = await data.supabase.from(\\"users\\").update({\\n      discipline: formData.discipline,\\n      qualification: formData.qualification,\\n      role: formData.role,\\n      signup_completed: true\\n    }).eq(\\"id\\", data.session.user.id);\\n    if (updateError) throw updateError;\\n    goto(\\"/dashboard\\");\\n  } catch (err) {\\n    console.error(\\"Profile completion error:\\", err);\\n    error = \\"Failed to complete profile. Please try again.\\";\\n  } finally {\\n    loading = false;\\n  }\\n}\\n<\/script>\\r\\n  \\r\\n  <div class=\\"container mx-auto p-6\\">\\r\\n    <div class=\\"card p-6 bg-surface-50-900-token max-w-xl mx-auto\\">\\r\\n      {#if error}\\r\\n        <div class=\\"alert variant-filled-error mb-4\\">\\r\\n          {error}\\r\\n        </div>\\r\\n      {/if}\\r\\n  \\r\\n      {#if step === 1}\\r\\n        <div class=\\"space-y-4\\">\\r\\n          <h2 class=\\"h2 text-center mb-6\\">Which discipline are you interested in?</h2>\\r\\n          <div class=\\"grid grid-cols-2 gap-4\\">\\r\\n            {#each disciplines as discipline}\\r\\n              <button\\r\\n                on:click={() => discipline.active && handleSelection('discipline', discipline.id)}\\r\\n                class=\\"btn {discipline.active ? 'variant-filled-primary' : 'variant-ghost-surface opacity-50 cursor-not-allowed'}\\"\\r\\n                disabled={!discipline.active || loading}\\r\\n              >\\r\\n                {discipline.label}\\r\\n              </button>\\r\\n            {/each}\\r\\n          </div>\\r\\n        </div>\\r\\n      {:else if step === 2}\\r\\n        <div class=\\"space-y-4\\">\\r\\n          <h2 class=\\"h2 text-center mb-6\\">What is your highest qualification?</h2>\\r\\n          <div class=\\"grid grid-cols-2 gap-4\\">\\r\\n            {#each qualifications as qual}\\r\\n              <button\\r\\n                on:click={() => handleSelection('qualification', qual.id)}\\r\\n                class=\\"btn variant-filled-primary\\"\\r\\n                disabled={loading}\\r\\n              >\\r\\n                {qual.label}\\r\\n              </button>\\r\\n            {/each}\\r\\n          </div>\\r\\n        </div>\\r\\n      {:else if step === 3}\\r\\n        <div class=\\"space-y-4\\">\\r\\n          <h2 class=\\"h2 text-center mb-6\\">Are you interested in being...</h2>\\r\\n          <div class=\\"grid grid-cols-2 gap-4\\">\\r\\n            {#each roles as role}\\r\\n              <button\\r\\n                on:click={() => handleSelection('role', role.id)}\\r\\n                class=\\"btn variant-filled-primary\\"\\r\\n                disabled={loading}\\r\\n              >\\r\\n                {role.label}\\r\\n              </button>\\r\\n            {/each}\\r\\n          </div>\\r\\n        </div>\\r\\n      {/if}\\r\\n  \\r\\n      <div class=\\"mt-4 flex justify-between\\">\\r\\n        {#if step > 1}\\r\\n          <button\\r\\n            on:click={() => step--}\\r\\n            class=\\"btn variant-ghost-primary\\"\\r\\n            disabled={loading}\\r\\n          >\\r\\n            Back\\r\\n          </button>\\r\\n        {/if}\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  \\r\\n  <style lang=\\"postcss\\">\\r\\n    .card {\\n    border-radius: 0.5rem;\\n    border-width: 1px;\\n    border-color: rgb(var(--color-surface-500) / 0.3);\\n    --tw-backdrop-blur: blur(16px);\\n    -webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\\n    backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)\\n}\\r\\n  </style>"],"names":[],"mappings":"AAmJI,oBAAM,CACN,aAAa,CAAE,MAAM,CACrB,YAAY,CAAE,GAAG,CACjB,YAAY,CAAE,IAAI,IAAI,mBAAmB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACjD,kBAAkB,CAAE,UAAU,CAC9B,uBAAuB,CAAE,IAAI,kBAAkB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,uBAAuB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,oBAAoB,CAAC,CAAC,IAAI,qBAAqB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,mBAAmB,CAAC,CAC/Q,eAAe,CAAE,IAAI,kBAAkB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,uBAAuB,CAAC,CAAC,IAAI,wBAAwB,CAAC,CAAC,IAAI,oBAAoB,CAAC,CAAC,IAAI,qBAAqB,CAAC,CAAC,IAAI,sBAAsB,CAAC,CAAC,IAAI,mBAAmB;AAC1Q"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let { data } = $$props;
  let loading = false;
  const disciplines = [
    {
      id: "geoscience",
      label: "Geoscience",
      active: true
    },
    {
      id: "petroleum",
      label: "Petroleum Engineering",
      active: false
    },
    {
      id: "facilities",
      label: "Facilities Engineering",
      active: false
    },
    {
      id: "operations",
      label: "Operations",
      active: false
    }
  ];
  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);
  $$result.css.add(css);
  return `<div class="container mx-auto p-6"><div class="card p-6 bg-surface-50-900-token max-w-xl mx-auto svelte-1j8d17m">${``} ${`<div class="space-y-4"><h2 class="h2 text-center mb-6" data-svelte-h="svelte-wrm6vv">Which discipline are you interested in?</h2> <div class="grid grid-cols-2 gap-4">${each(disciplines, (discipline) => {
    return `<button class="${"btn " + escape(
      discipline.active ? "variant-filled-primary" : "variant-ghost-surface opacity-50 cursor-not-allowed",
      true
    )}" ${!discipline.active || loading ? "disabled" : ""}>${escape(discipline.label)} </button>`;
  })}</div></div>`} <div class="mt-4 flex justify-between">${``}</div></div> </div>`;
});
export {
  Page as default
};
